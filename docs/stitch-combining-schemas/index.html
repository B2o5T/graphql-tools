<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GraphQL Tools Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GraphQL Tools Blog Atom Feed">
<script src="https://the-guild.dev/static/crisp.js"></script><title data-react-helmet="true">Combining schemas | GraphQL Tools</title><meta data-react-helmet="true" property="og:url" content="https://graphql-tools.com/docs/stitch-combining-schemas"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Combining schemas | GraphQL Tools"><meta data-react-helmet="true" name="description" content="Schema stitching (@graphql-tools/stitch) creates a single GraphQL gateway schema from multiple underlying GraphQL services. Unlike schema merging, which simply combines local schema instances, stitching builds a combined proxy layer that delegates requests through to underlying service APIs. As of GraphQL Tools v7, stitching is fairly comparable to Apollo Federation with automated query planning, merged types, and declarative schema directives."><meta data-react-helmet="true" property="og:description" content="Schema stitching (@graphql-tools/stitch) creates a single GraphQL gateway schema from multiple underlying GraphQL services. Unlike schema merging, which simply combines local schema instances, stitching builds a combined proxy layer that delegates requests through to underlying service APIs. As of GraphQL Tools v7, stitching is fairly comparable to Apollo Federation with automated query planning, merged types, and declarative schema directives."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://graphql-tools.com/docs/stitch-combining-schemas"><link data-react-helmet="true" rel="alternate" href="https://graphql-tools.com/docs/stitch-combining-schemas" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://graphql-tools.com/docs/stitch-combining-schemas" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.cfa1c9ec.css">
<link rel="preload" href="/assets/js/runtime~main.85af6181.js" as="script">
<link rel="preload" href="/assets/js/main.9a323872.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_3wvD">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="GraphQL Tools Logo" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="/img/logo.png" alt="GraphQL Tools Logo" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">API &amp; Documentation</a><a href="https://github.com/ardatan/graphql-tools" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://the-guild.dev/contact" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact Us</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="GraphQL Tools Logo" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="/img/logo.png" alt="GraphQL Tools Logo" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/introduction">API &amp; Documentation</a></li><li class="menu__list-item"><a href="https://github.com/ardatan/graphql-tools" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://the-guild.dev/contact" target="_blank" rel="noopener noreferrer" class="menu__link">Contact Us</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_3jyA"><div class="docSidebarContainer_3jRz" role="complementary"><div class="sidebar_2j-V"><div class="menu menu--responsive thin-scrollbar menu_1Xkn"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Vtis" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generate-schema">Executable schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers-composition">Resolvers composition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scalars">Custom scalars and enums</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mocking">Mocking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/connectors">Data fetching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/schema-directives">Schema directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/directive-resolvers">Directive resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/schema-delegation">Schema delegation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/remote-schemas">Remote schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/schema-wrapping">Schema wrapping</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/schema-merging">Schema merging</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Schema stitching</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/stitch-combining-schemas">Combining schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/stitch-type-merging">Type merging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/stitch-directives-sdl">Directives SDL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/stitch-schema-extensions">Schema extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/stitch-api">Stitching API</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-setup">Setup an HTTP server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/schema-loading">Schema loading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documents-loading">Documents loading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/graphql-tag-pluck">GraphQL Tag Pluck</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/relay-operation-optimizer">Relay Operation Optimizer</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Migration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/migration-from-tools">From tools v4 - v6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/migration-from-toolkit">From GraphQL Toolkit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/migration-from-merge-graphql-schemas">From Merge GraphQL Schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/migration-from-import">From GraphQL Import</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Modules</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/batch-delegate">batch-delegate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/batch-execute">batch-execute</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/delegate">delegate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/graphql-tag-pluck">graphql-tag-pluck</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/import">import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/links">links</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/load">load</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/load-files">load-files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/merge">merge</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/mock">mock</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/node-require">node-require</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/optimize">optimize</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/relay-operation-optimizer">relay-operation-optimizer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/resolvers-composition">resolvers-composition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/schema">schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/stitch">stitch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/stitching-directives">stitching-directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/utils">utils</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/webpack-loader">webpack-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/webpack-loader-runtime">webpack-loader-runtime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/wrap">wrap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/apollo-engine-loader">apollo-engine-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/code-file-loader">code-file-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/git-loader">git-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/github-loader">github-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/graphql-file-loader">graphql-file-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/json-file-loader">json-file-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/module-loader">module-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/prisma-loader">prisma-loader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/modules/url-loader">url-loader</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Classes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.addargumentsasvariables">Class: AddArgumentsAsVariables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.addselectionsets">Class: AddSelectionSets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.addtypenametoabstract">Class: AddTypenameToAbstract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_apollo_engine_src.apolloengineloader">Class: ApolloEngineLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/links_src.awaitvariableslink">Class: AwaitVariablesLink</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.checkresultandhandleerrors">Class: CheckResultAndHandleErrors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_code_file_src.codefileloader">Class: CodeFileLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.expandabstracttypes">Class: ExpandAbstractTypes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.extractfield">Class: ExtractField</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.filterinputobjectfields">Class: FilterInputObjectFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.filterinterfacefields">Class: FilterInterfaceFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.filterobjectfielddirectives">Class: FilterObjectFieldDirectives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.filterobjectfields">Class: FilterObjectFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.filterrootfields">Class: FilterRootFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.filtertoschema">Class: FilterToSchema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.filtertypes">Class: FilterTypes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_github_src.githubloader">Class: GithubLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_git_src.gitloader">Class: GitLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_graphql_file_src.graphqlfileloader">Class: GraphQLFileLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.hoistfield">Class: HoistField</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_json_file_src.jsonfileloader">Class: JsonFileLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.mapfields">Class: MapFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.mapleafvalues">Class: MapLeafValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/mock_src.mocklist">Class: MockList</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/mock_src.mockstore">Class: MockStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_module_src.moduleloader">Class: ModuleLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_prisma_src.prismaloader">Class: PrismaLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.pruneschema">Class: PruneSchema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.removeobjectfielddeprecations">Class: RemoveObjectFieldDeprecations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.removeobjectfielddirectives">Class: RemoveObjectFieldDirectives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.removeobjectfieldswithdeprecation">Class: RemoveObjectFieldsWithDeprecation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.removeobjectfieldswithdirective">Class: RemoveObjectFieldsWithDirective</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.renameinputobjectfields">Class: RenameInputObjectFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.renameinterfacefields">Class: RenameInterfaceFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.renameobjectfields">Class: RenameObjectFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.renamerootfields">Class: RenameRootFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.renameroottypes">Class: RenameRootTypes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.renametypes">Class: RenameTypes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/utils_src.schemadirectivevisitor">Class: SchemaDirectiveVisitor&amp;lt;TArgs, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/utils_src.schemavisitor">Class: SchemaVisitor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.subschema">Class: Subschema&amp;lt;K, V, C, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transformcompositefields">Class: TransformCompositeFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transformenumvalues">Class: TransformEnumValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transforminputobjectfields">Class: TransformInputObjectFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transforminterfacefields">Class: TransformInterfaceFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transformobjectfields">Class: TransformObjectFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transformquery">Class: TransformQuery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.transformrootfields">Class: TransformRootFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/loaders_url_src.urlloader">Class: UrlLoader</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/delegate_src.visitselectionsets">Class: VisitSelectionSets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.wrapfields">Class: WrapFields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.wrapquery">Class: WrapQuery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/classes/wrap_src.wraptype">Class: WrapType</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Interfaces</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/loaders_apollo_engine_src.apolloengineoptions">Interface: ApolloEngineOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/batch_delegate_src.batchdelegateoptions">Interface: BatchDelegateOptions&amp;lt;TContext, K, V, C\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.batchingoptions">Interface: BatchingOptions&amp;lt;K, V, C\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/merge_src.config">Interface: Config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/batch_delegate_src.createbatchdelegatefnoptions">Interface: CreateBatchDelegateFnOptions&amp;lt;TContext, K, V, C\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.delegationcontext">Interface: DelegationContext</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.executionparams">Interface: ExecutionParams&amp;lt;TArgs, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.executionresult">Interface: ExecutionResult&amp;lt;TData\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitching_directives_src.expansion">Interface: Expansion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.externalobject">Interface: ExternalObject&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.getdocumentnodefromschemaoptions">Interface: GetDocumentNodeFromSchemaOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/loaders_github_src.githubloaderoptions">Interface: GithubLoaderOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.graphqlexecutioncontext">Interface: GraphQLExecutionContext</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/loaders_graphql_file_src.graphqlfileloaderoptions">Interface: GraphQLFileLoaderOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.graphqlparseoptions">Interface: GraphQLParseOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/graphql_tag_pluck_src.graphqltagpluckoptions">Interface: GraphQLTagPluckOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.iaddresolverstoschemaoptions">Interface: IAddResolversToSchemaOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.icreateproxyingresolveroptions">Interface: ICreateProxyingResolverOptions&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.icreaterequest">Interface: ICreateRequest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.icreaterequestfrominfo">Interface: ICreateRequestFromInfo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.idelegaterequestoptions">Interface: IDelegateRequestOptions&amp;lt;TContext, TArgs\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.idelegatetoschemaoptions">Interface: IDelegateToSchemaOptions&amp;lt;TContext, TArgs\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.idirectiveresolvers">Interface: IDirectiveResolvers&amp;lt;TSource, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/schema_src.iexecutableschemadefinition">Interface: IExecutableSchemaDefinition&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.ifieldresolveroptions">Interface: IFieldResolverOptions&amp;lt;TSource, TContext, TArgs\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/schema_src.ilogger">Interface: ILogger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/wrap_src.imakeremoteexecutableschemaoptions">Interface: IMakeRemoteExecutableSchemaOptions&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/mock_src.imockserver">Interface: IMockServer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/mock_src.imockstore">Interface: IMockStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.iresolvervalidationoptions">Interface: IResolverValidationOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.istitchschemasoptions">Interface: IStitchSchemasOptions&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/loaders_json_file_src.jsonfileloaderoptions">Interface: JsonFileLoaderOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.loaddocumenterror">Interface: LoadDocumentError</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.loader">Interface: Loader&amp;lt;TPointer, TOptions\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/load_files_src.loadfilesoptions">Interface: LoadFilesOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/loaders_url_src.loadfromurloptions">Interface: LoadFromUrlOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitching_directives_src.mappinginstruction">Interface: MappingInstruction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.mergedfieldconfig">Interface: MergedFieldConfig</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.mergedtypeconfig">Interface: MergedTypeConfig&amp;lt;K, V, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.mergedtypeentrypoint">Interface: MergedTypeEntryPoint&amp;lt;K, V, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.mergedtypeinfo">Interface: MergedTypeInfo&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitching_directives_src.mergedtyperesolverinfo">Interface: MergedTypeResolverInfo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.mergedtyperesolveroptions">Interface: MergedTypeResolverOptions&amp;lt;K, V\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.mergeenumvalueconfigcandidate">Interface: MergeEnumValueConfigCandidate&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.mergefieldconfigcandidate">Interface: MergeFieldConfigCandidate&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.mergeinputfieldconfigcandidate">Interface: MergeInputFieldConfigCandidate&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/merge_src.mergeresolversoptions">Interface: MergeResolversOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/merge_src.mergeschemasconfig">Interface: MergeSchemasConfig&amp;lt;Resolvers\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.mergetypecandidate">Interface: MergeTypeCandidate&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.observable">Interface: Observable&amp;lt;T\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.observer">Interface: Observer&amp;lt;T\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitching_directives_src.parsedmergeargsexpr">Interface: ParsedMergeArgsExpr</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/loaders_prisma_src.prismaloaderoptions">Interface: PrismaLoaderOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitching_directives_src.propertytree">Interface: PropertyTree</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.pruneschemaoptions">Interface: PruneSchemaOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.request">Interface: Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.schemamapper">Interface: SchemaMapper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.schemaprintoptions">Interface: SchemaPrintOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.schemavisitormap">Interface: SchemaVisitorMap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/utils_src.source">Interface: Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitching_directives_src.stitchingdirectivesoptions">Interface: StitchingDirectivesOptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.stitchinginfo">Interface: StitchingInfo&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.subschemaconfig">Interface: SubschemaConfig&amp;lt;K, V, C, TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/delegate_src.transform">Interface: Transform&amp;lt;T\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.typemergingoptions">Interface: TypeMergingOptions&amp;lt;TContext\&amp;gt;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/interfaces/stitch_src.validationsettings">Interface: ValidationSettings</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Enums</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/enums/merge_src.compareval">Enumeration: CompareVal</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/enums/utils_src.mapperkind">Enumeration: MapperKind</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/enums/stitch_src.validationlevel">Enumeration: ValidationLevel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/enums/utils_src.visitschemakind">Enumeration: VisitSchemaKind</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_28SP"><div class="container padding-vert--lg docItemWrapper_3ZSj"><div class="row"><div class="col docItemCol_1o9i"><div class="docItemContainer_3nUq"><article><header><h1 class="docTitle_33JP">Combining schemas</h1></header><div class="markdown"><p>Schema stitching (<code>@graphql-tools/stitch</code>) creates a single GraphQL gateway schema from multiple underlying GraphQL services. Unlike <a href="/docs/merge-schemas">schema merging</a>, which simply combines local schema instances, stitching builds a combined proxy layer that delegates requests through to underlying service APIs. As of GraphQL Tools v7, stitching is fairly comparable to <a href="https://www.apollographql.com/docs/federation/" target="_blank" rel="noopener noreferrer">Apollo Federation</a> with automated query planning, merged types, and declarative schema directives.</p><p>Note that schema stitching is a superset of the <a href="/docs/schema-wrapping">schema wrapping</a> API. Rather than wrapping schemas individually and then combining them, <code>stitchSchemas</code> may be used directly to handle all wrapping concerns.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="why-stitching"></a>Why stitching?<a class="hash-link" href="#why-stitching" title="Direct link to heading">#</a></h2><p>One of the main benefits of GraphQL is that we can query for all data in a single request to one schema. As that schema grows though, it may become preferable to break it up into separate modules or microservices that can be developed independently. We may also want to integrate the schemas we own with third-party schemas, allowing mashups with external data.</p><p><img alt="distributed service graph" src="/assets/images/distributed-graph-6962df44b42254da48d3557e74e5d074.png"></p><p>In these cases, <code>stitchSchemas</code> is used to combine multiple GraphQL APIs into one unified gateway proxy schema that knows how to delegate parts of a request to the relevant underlying subschemas. These subschemas may be local GraphQL instances or APIs running on remote servers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="getting-started"></a>Getting started<a class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><p>In this example we&#x27;ll stitch together two very simple schemas representing a system of users and posts. You can find many supporting examples of stitching concepts in the <a href="https://github.com/gmac/schema-stitching-handbook" target="_blank" rel="noopener noreferrer">Schema Stitching Handbook</a>.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> makeExecutableSchema </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/schema&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> stitchSchemas </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/stitch&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> postsSchema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makeExecutableSchema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  typeDefs</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    type Post {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      id: ID!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      text: String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      userId: ID!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="display:inline-block;color:rgb(195, 232, 141)">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    type Query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      postById(id: ID!): Post</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      postsByUserId(userId: ID!): [Post]!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  resolvers</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> usersSchema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makeExecutableSchema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  typeDefs</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    type User {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      id: ID!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      email: String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="display:inline-block;color:rgb(195, 232, 141)">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    type Query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      userById(id: ID!): User</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  resolvers</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// setup subschema configurations</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> postsSubschema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> schema</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> postsSchema </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> usersSubschema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> schema</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> usersSchema </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// build the combined schema</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gatewaySchema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">stitchSchemas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  subschemas</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    postsSubschema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    usersSubschema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><p>This process builds two GraphQL schemas, places them each into subschema configuration wrappers (discussed below), and then passes the subschemas to <code>stitchSchemas</code> to produce one combined schema with the following root fields:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q graphql"><div tabindex="0" class="prism-code language-graphql codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">postById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ID</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Post</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">postsByUserId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">userId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ID</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Post</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">userById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ID</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> User</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><p>We now have a single gateway schema that allows data from either subschema to be requested in the same query.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="subschema-configs"></a>Subschema configs<a class="hash-link" href="#subschema-configs" title="Direct link to heading">#</a></h2><p>In the example above, the extra &quot;subschema&quot; wrapper objects may look verbose at first glance, but they are actually basic implementations of the <code>SubschemaConfig</code> interface that accepts several additional settings (discussed throughout this guide):</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">SubschemaConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  schema</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">GraphQLSchema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  rootValue</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> any</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  executor</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Executor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  subscriber</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Subscriber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  createProxyingResolver</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">CreateProxyingResolverFn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transforms</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Array</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">Transform</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  merge</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token maybe-class-name">MergedTypeConfig</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  batch</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  batchingOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    extensionsReducer</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token parameter">mergedExtensions</span><span class="token parameter operator" style="color:rgb(137, 221, 255)">:</span><span class="token parameter"> Record</span><span class="token parameter operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token parameter">string</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> any</span><span class="token parameter operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token parameter">      executionParams</span><span class="token parameter operator" style="color:rgb(137, 221, 255)">:</span><span class="token parameter"> ExecutionParams</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> any</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dataLoaderOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">DataLoader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Options</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token constant" style="color:rgb(130, 170, 255)">K</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">V</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">C</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><p>Subschema config should <em>directly</em> provide as many settings as possible to avoid unnecessary layers of delegation. For example, while we <em>could</em> pre-wrap a subschema with transforms and a remote executor, that would be far less efficient than providing the <code>schema</code>, <code>transforms</code>, and <code>executor</code> options directly to subschema config.</p><p>Also note that these subschema config objects may need to be referenced again in other stitching contexts, such as <a href="/docs/stitch-schema-extensions">schema extensions</a>. With that in mind, you may want to export your subschema configs from their module(s).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="stitching-remote-schemas"></a>Stitching remote schemas<a class="hash-link" href="#stitching-remote-schemas" title="Direct link to heading">#</a></h2><p>To include a remote schema in the combined gateway, you must provide at least the <code>schema</code> and <code>executor</code> subschema config options, and an optional <code>subscriber</code> for subscriptions:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> introspectSchema </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/wrap&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> fetch </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cross-fetch&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> print </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;graphql&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">remoteExecutor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> document</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> variables </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> query </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> fetchResult </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://my.remote.service/graphql&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;POST&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    body</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> variables </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> fetchResult</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> postsSubschema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  schema</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">introspectSchema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">remoteExecutor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  executor</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> remoteExecutor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// subscriber: remoteSubscriber</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><ul><li><code>schema</code>: this is a non-executable schema representing the remote API. The remote schema may be obtained using <a href="/docs/remote-schemas/#introspectschemaexecutor-context">introspection</a>, or fetched as a flat SDL string (from a server or repo) and built into a schema using <a href="https://graphql.org/graphql-js/utilities/#buildschema" target="_blank" rel="noopener noreferrer"><code>buildSchema</code></a>. Note that not all GraphQL servers enable introspection, and those that do will not include custom directives.</li><li><code>executor</code>: is a generic method that performs requests to a remote schema. It&#x27;s quite simple to <a href="/docs/remote-schemas#creating-an-executor">write your own</a>. Subschema config uses the executor for query and mutation operations. See <a href="https://github.com/gmac/schema-stitching-handbook/tree/master/combining-local-and-remote-schemas" target="_blank" rel="noopener noreferrer">handbook example</a>.</li><li><code>subscriber</code>: to enable subscription operations, include a <a href="/docs/remote-schemas#creating-a-subscriber">subscriber function</a> that returns an AsyncIterator. See <a href="https://github.com/gmac/schema-stitching-handbook/tree/master/mutations-and-subscriptions" target="_blank" rel="noopener noreferrer">handbook example</a>.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="duplicate-types"></a>Duplicate types<a class="hash-link" href="#duplicate-types" title="Direct link to heading">#</a></h2><p>Stitching has two strategies for handling types duplicated across subschemas: an automatic merge strategy (default), and an older manual resolution strategy. You may select between these strategies using the <code>mergeTypes</code> option.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="automatic-merge"></a>Automatic merge<a class="hash-link" href="#automatic-merge" title="Direct link to heading">#</a></h3><p>Types with the same name are automatically merged by default in GraphQL Tools v7. That means objects, interfaces, and input objects with the same name will consolidate their fields across subschemas, and unions/enums will consolidate all of their members. The combined gateway schema will then smartly delegate portions of a request to the proper origin subschema(s). See <a href="/docs/stitch-type-merging/">type merging guide</a> for a comprehensive overview.</p><p>Automatic merging will only encounter conflicts on type descriptions and fields. By default, the final definition of a type or field found in the subschemas array is used, or a specific definition may be <a href="/docs/stitch-type-merging#canonical-definitions">marked as canonical</a> to prioritize it. You may customize all selection logic using <code>typeMergingOptions</code>; the following example prefers the <em>first</em> definition of each conflicting element found in the subschemas array:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> stitchSchemas </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/stitch&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gatewaySchema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">stitchSchemas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  subschemas</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mergeTypes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;&lt; default in v7</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  typeMergingOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// select a preferred type candidate to provide definitions:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">typeCandidateMerger</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">candidates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> candidate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// and/or itemize the selection of other specific definitions:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">typeDescriptionsMerger</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">candidates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> candidate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">fieldConfigMerger</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">candidates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> candidate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fieldConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">inputFieldConfigMerger</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">candidates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> candidate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">inputFieldConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">enumValueConfigMerger</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">candidates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> candidate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">enumValueConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="merge-validations"></a>Merge validations<a class="hash-link" href="#merge-validations" title="Direct link to heading">#</a></h4><p>The automatic merge strategy also validates the integrity of merged schemas. Validations may be set to <code>error</code>, <code>warn</code>, or <code>off</code> for the entire schema or scoped for specific types and fields:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> stitchSchemas </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/stitch&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gatewaySchema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">stitchSchemas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  subschemas</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  typeMergingOptions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    validationSettings</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      validationLevel</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      strictNullComparison</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;&lt; gateway &quot;String&quot; may proxy subschema &quot;String!&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      proxiableScalars</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token constant" style="color:rgb(130, 170, 255)">ID</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;String&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;&lt; gateway &quot;ID&quot; may proxy subschema &quot;String&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    validationScopes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// scope to specific element paths</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;User.id&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        validationLevel</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;warn&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        strictNullComparison</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="manual-resolution"></a>Manual resolution<a class="hash-link" href="#manual-resolution" title="Direct link to heading">#</a></h3><p>By setting <code>mergeTypes: false</code>, only the final description and fields for a type found in the subschemas array will be used, and automated query planning will be disabled. You may manually resolve differences between conflicting types with an <code>onTypeConflict</code> handler:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> stitchSchemas </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/stitch&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> gatewaySchema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">stitchSchemas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  subschemas</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mergeTypes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">onTypeConflict</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">left</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> right</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">left</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">version</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token plain"> info</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">right</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">version</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> left </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> right</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="adding-transforms"></a>Adding transforms<a class="hash-link" href="#adding-transforms" title="Direct link to heading">#</a></h2><p>Another strategy to avoid conflicts while combining schemas is to modify one or more of the subschemas using <a href="/docs/schema-wrapping#transform">transforms</a>. Transforming allows a schema to be groomed in such ways as adding namespaces, renaming types, or removing fields (to name a few) prior to stitching it into the combined gateway schema. These transforms should be added directly to subschema config:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">FilterRootFields</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RenameTypes</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@graphql-tools/wrap&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> postsSubschema </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  schema</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> postsSchema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transforms</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FilterRootFields</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">operation</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> rootField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> rootField </span><span class="token operator" style="color:rgb(137, 221, 255)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;postsByUserId&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">RenameTypes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">Post_</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><p>In the example above, we transform the <code>postsSchema</code> by removing the <code>postsByUserId</code> root field and adding a <code>Post_</code> prefix to all types in the schema. These modifications will only be present in the combined gateway schema.</p><p>Note that when <a href="#automatic-merge">automatically merging types</a>, all transforms are applied <em>prior</em> to merging. That means transformed types will merge based on their transformed names within the combined gateway schema.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="error-handling"></a>Error handling<a class="hash-link" href="#error-handling" title="Direct link to heading">#</a></h2><p>Whether you&#x27;re <a href="/docs/stitch-type-merging">merging types</a>, using <a href="/docs/stitch-schema-extensions">schema extensions</a>, or simply combining schemas, any errors returned by a subschema will flow through the stitching process and report at their mapped output positions. It&#x27;s fairly seamless to provide quality errors from a stitched schema by following some basic guidelines:</p><ol><li><p><strong>Report errors!</strong> Having a subschema return <code>null</code> without an error for missing or failed records is a poor development experience to begin with. This omission will compound should an unexpected value produce a misleading failure in gateway stitching. Reporting <a href="https://spec.graphql.org/June2018/#sec-Errors" target="_blank" rel="noopener noreferrer">proper GraphQL errors</a> will contextualize failures in subschemas, and by extension, within the stitched schema.</p></li><li><p><strong>Map errors to array positions</strong>. When returning arrays of records (a common pattern while <a href="/docs/stitch-type-merging#batching">batch loading</a>), make sure to return errors for specific array positions rather than erroring out the entire array. For example, an array should be resolved as:</p></li></ol><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q js"><div tabindex="0" class="prism-code language-js codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">posts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">NotFoundError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;3&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><ol start="3"><li><strong>Assure valid error paths</strong>. The <a href="https://spec.graphql.org/June2018/#sec-Errors" target="_blank" rel="noopener noreferrer">GraphQL errors spec</a> prescribes a <code>path</code> attribute mapping an error to its corresponding document position. Stitching uses these paths to remap subschema errors into the combined result. While GraphQL libraries should automatically configure this <code>path</code> for you, the accuracy <a href="https://github.com/rmosolgo/graphql-ruby/issues/3193" target="_blank" rel="noopener noreferrer">may vary by programming language</a>.</li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ardatan/graphql-tools/edit/master/website/docs/stitch-combining-schemas.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_1CBY" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/schema-merging"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Schema merging</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/stitch-type-merging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Type merging »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3J2a thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-stitching" class="table-of-contents__link">Why stitching?</a></li><li><a href="#getting-started" class="table-of-contents__link">Getting started</a></li><li><a href="#subschema-configs" class="table-of-contents__link">Subschema configs</a></li><li><a href="#stitching-remote-schemas" class="table-of-contents__link">Stitching remote schemas</a></li><li><a href="#duplicate-types" class="table-of-contents__link">Duplicate types</a><ul><li><a href="#automatic-merge" class="table-of-contents__link">Automatic merge</a></li><li><a href="#manual-resolution" class="table-of-contents__link">Manual resolution</a></li></ul></li><li><a href="#adding-transforms" class="table-of-contents__link">Adding transforms</a></li><li><a href="#error-handling" class="table-of-contents__link">Error handling</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="http://bit.ly/guild-chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/graphql-tools" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Urigo/graphql-tools/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/TheGuildDev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 The Guild, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.85af6181.js"></script>
<script src="/assets/js/main.9a323872.js"></script>
</body>
</html>