(self.webpackChunk_graphql_tools_website=self.webpackChunk_graphql_tools_website||[]).push([[5935],{5318:function(e,n,a){"use strict";a.d(n,{Zo:function(){return i},kt:function(){return m}});var t=a(7378);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=t.createContext({}),p=function(e){var n=t.useContext(c),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},i=function(e){var n=p(e.components);return t.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,h=u["".concat(c,".").concat(m)]||u[m]||d[m]||o;return a?t.createElement(h,l(l({ref:n},i),{},{components:a})):t.createElement(h,l({ref:n},i))}));function m(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=u;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var p=2;p<o;p++)l[p]=a[p];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1010:function(e,n,a){"use strict";a.r(n),a.d(n,{frontMatter:function(){return l},metadata:function(){return s},toc:function(){return c},default:function(){return i}});var t=a(9603),r=a(120),o=(a(7378),a(5318)),l={id:"loaders",title:"Loaders",sidebar_label:"Loaders"},s={unversionedId:"loaders",id:"loaders",isDocsHomePage:!1,title:"Loaders",description:"There are a lot of loaders that load your schemas and documents from different sources. You need to provide those loaders under loaders parameter like below;",source:"@site/docs/loaders.md",sourceDirName:".",slug:"/loaders",permalink:"/docs/loaders",editUrl:"https://github.com/ardatan/graphql-tools/edit/master/website/docs/loaders.md",version:"current",sidebar_label:"Loaders",frontMatter:{id:"loaders",title:"Loaders",sidebar_label:"Loaders"}},c=[{value:"GraphQL File Loader",id:"graphql-file-loader",children:[]},{value:"JSON File Loader",id:"json-file-loader",children:[]},{value:"Code File Loader",id:"code-file-loader",children:[]},{value:"URL Loader",id:"url-loader",children:[]}],p={toc:c};function i(e){var n=e.components,a=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,t.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"There are a lot of loaders that load your schemas and documents from different sources. You need to provide those loaders under ",(0,o.kt)("inlineCode",{parentName:"p"},"loaders")," parameter like below;"),(0,o.kt)("h3",{id:"graphql-file-loader"},"GraphQL File Loader"),(0,o.kt)("p",null,"This loader loads your GraphQLSchema from ",(0,o.kt)("inlineCode",{parentName:"p"},".graphql")," files like below;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// schema is `GraphQLSchema` instance\nconst schema = await loadSchema('schema.graphql', {  // load from a single schema file\n    loaders: [\n        new GraphQLFileLoader()\n    ]\n});\n\n// You can add resolvers to that schema\nconst schemaWithResolvers = addResolversToSchema({\n  schema,\n  resolvers: {\n    Query: {...}\n  }\n});\n")),(0,o.kt)("p",null,"This loader also supports glob pattern;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const schema = await loadSchema('graphql/**/*.graphql', {  // load files and merge them into a single schema object\n    loaders: [\n        new GraphQLFileLoader()\n    ]\n});\n")),(0,o.kt)("p",null,"If you use ",(0,o.kt)("inlineCode",{parentName:"p"},"loadDocuments"),", it gives you an array of document source objects;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const documents = await loadSchema('graphql/**/*.graphql', {  // load files and merge them into a single schema object\n    loaders: [\n        new GraphQLFileLoader()\n    ]\n});\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This loader only supports Node environment because it relies on File System of your platform.")),(0,o.kt)("h3",{id:"json-file-loader"},"JSON File Loader"),(0,o.kt)("p",null,"This loader handles schema introspection and document nodes in ",(0,o.kt)("inlineCode",{parentName:"p"},".json")," files."),(0,o.kt)("p",null,"Introspection is handled in the example below;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const schema = await loadSchema('schema-introspection.json', {\n  loaders: [\n    new JsonFileLoader(),\n  ]\n});\n\n// Mocked non-executable schema generated from an introspection\nconst mockedSchema = addMocksToSchema({ schema });\n")),(0,o.kt)("p",null,"This loader handles ",(0,o.kt)("inlineCode",{parentName:"p"},"json")," files if they represent ",(0,o.kt)("inlineCode",{parentName:"p"},"DocumentNode"),", and returns an array of document sources."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const documents = await loadDocuments('**/*-document.json', {\n  loaders: [\n    new JsonFileLoader(),\n  ]\n});\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This loader only supports Node environment because it relies on File System of your platform.")),(0,o.kt)("h3",{id:"code-file-loader"},"Code File Loader"),(0,o.kt)("p",null,"This loader extracts GraphQL SDL string, exported ",(0,o.kt)("inlineCode",{parentName:"p"},"GraphQLSchema")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"DocumentNode")," from TypeScript and JavaScript code files.\nLet's say you have the following code file;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const ME_QUERY = gql`\n  query Me {\n    me {\n      id\n      name\n      username\n      age\n    }\n  }\n`;\n")),(0,o.kt)("p",null,"And the following code will extract ",(0,o.kt)("inlineCode",{parentName:"p"},"Me")," query operation from that code file without executing it using ",(0,o.kt)("a",{parentName:"p",href:"/docs/graphql-tag-pluck"},"GraphQL Tag Pluck"),". It understands ",(0,o.kt)("inlineCode",{parentName:"p"},"/* GraphQL */")," magic comment and ",(0,o.kt)("inlineCode",{parentName:"p"},"gql")," literals. You can configure ",(0,o.kt)("a",{parentName:"p",href:"/docs/graphql-tag-pluck"},"GraphQL Tag Pluck")," using ",(0,o.kt)("inlineCode",{parentName:"p"},"pluckConfig"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { loadDocuments } from '@graphql-tools/load';\nimport { CodeFileLoader } from '@graphql-tools/code-file-loader';\n\nconst documents = await loadDocuments('./src/**/graphql/*.ts', {\n  loaders:[\n    new CodeFileLoader()\n  ],\n  pluckConfig: {\n    ...\n  }\n})\n")),(0,o.kt)("p",null,"You can also load your schema from code files like below;"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// typeDefs.ts\nexport const typeDefs = /* GraphQL */`\n  type Query {\n    foo: String\n  }\n`\n// or schema.ts\nexport const schema = new GraphQLSchema(...);\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This loader only supports Node environment because it relies on File System of your platform.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NOTE:")," If you are using typescript and ",(0,o.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/tsconfig#paths"},"path aliases"),", you may also need ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/tsconfig-paths"},"tsconfig-paths"),".  Further reading can be found at the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ardatan/graphql-tools/issues/1544"},"GitHub issue.")),(0,o.kt)("h3",{id:"url-loader"},"URL Loader"),(0,o.kt)("p",null,"This loader generates ",(0,o.kt)("a",{parentName:"p",href:"/docs/remote-schemas"},"(a fully executable remote schema using @graphql-tools/wrap)")," from a URL endpoint."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const schema = await loadSchema('http://localhost:3000/graphql', {\n  loaders: [\n    new UrlLoader(),\n  ]\n});\n")),(0,o.kt)("p",null,"You can provide custom headers, HTTP method and custom W3C fetch method."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const schema = await loadSchema('http://localhost:3000/graphql', {\n  loaders: [\n    new UrlLoader(),\n  ],\n  headers: {\n    Accept: 'application/json',\n  },\n  method: 'POST',\n  fetch: myFetch,\n});\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This loader supports both browser and node environments.")),(0,o.kt)("p",null,"In browser this remote schema can be called using vanilla GraphQL-js and act like a simple GraphQL client."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const schema = await loadSchema('http://localhost:3000/graphql', {\n  loaders: [\n    new UrlLoader(),\n  ]\n});\n\nconst response = await graphql(schema, /* GraphQL */`\n  {\n    foo {\n      bar {\n        baz\n      }\n    }\n  }\n`);\n\nconsole.log(response);\n")))}i.isMDXComponent=!0}}]);